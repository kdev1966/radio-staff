# ======================================
# RADIO STAFF MANAGER - PRODUCTION ENV
# ======================================
# IMPORTANT: Copier ce fichier vers .env.production et modifier TOUTES les valeurs
# Ne JAMAIS commiter les vraies valeurs dans Git
# Générer des secrets forts avec: openssl rand -base64 32

# ---------------------------------------
# DATABASE CONFIGURATION
# ---------------------------------------
# PostgreSQL database credentials
POSTGRES_DB=radiodb
POSTGRES_USER=radio_prod_user
# IMPORTANT: Générer avec: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS

# Database connection string for backend
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://radio_prod_user:CHANGE_ME_STRONG_PASSWORD_MIN_32_CHARS@postgres:5432/radiodb?schema=public

# ---------------------------------------
# KEYCLOAK CONFIGURATION
# ---------------------------------------
# Keycloak admin console credentials
KEYCLOAK_ADMIN=admin
# IMPORTANT: Générer avec: openssl rand -base64 32
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_STRONG_ADMIN_PASSWORD_MIN_32_CHARS

# Keycloak client secrets pour l'authentification
# IMPORTANT: Générer avec: openssl rand -base64 32
KEYCLOAK_CLIENT_SECRET=CHANGE_ME_STRONG_CLIENT_SECRET_MIN_32_CHARS

# Keycloak realm configuration
KEYCLOAK_REALM=radio-staff
KEYCLOAK_CLIENT_ID=radio-backend

# Keycloak URLs (interne pour backend)
KEYCLOAK_URL=http://keycloak:8080

# ---------------------------------------
# BACKEND CONFIGURATION
# ---------------------------------------
# Node environment
NODE_ENV=production

# Backend API port
PORT=4000

# JWT Secret pour les tokens (si utilisé)
# IMPORTANT: Générer avec: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_STRONG_JWT_SECRET_MIN_32_CHARS

# CORS origins (séparer par des virgules si plusieurs)
CORS_ORIGINS=http://192.168.1.200,http://localhost

# API rate limiting
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# ---------------------------------------
# FRONTEND CONFIGURATION
# ---------------------------------------
# Next.js telemetry
NEXT_TELEMETRY_DISABLED=1

# Public URLs (accessibles depuis le navigateur)
NEXT_PUBLIC_API_URL=/api
NEXT_PUBLIC_KEYCLOAK_URL=http://192.168.1.200:8080
NEXT_PUBLIC_KEYCLOAK_REALM=radio-staff
NEXT_PUBLIC_KEYCLOAK_CLIENT_ID=radio-frontend

# ---------------------------------------
# NETWORKING CONFIGURATION
# ---------------------------------------
# Hostname du serveur VPS
SERVER_HOST=192.168.1.200

# Ports exposés
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
BACKEND_PORT=4000
KEYCLOAK_PORT=8080
POSTGRES_PORT=5432

# ---------------------------------------
# RESOURCE LIMITS
# ---------------------------------------
# Limites mémoire pour les conteneurs (format: 512m, 1g, 2g)
POSTGRES_MEM_LIMIT=1g
POSTGRES_MEM_RESERVATION=512m

KEYCLOAK_MEM_LIMIT=1g
KEYCLOAK_MEM_RESERVATION=512m

BACKEND_MEM_LIMIT=512m
BACKEND_MEM_RESERVATION=256m

FRONTEND_MEM_LIMIT=512m
FRONTEND_MEM_RESERVATION=256m

NGINX_MEM_LIMIT=256m
NGINX_MEM_RESERVATION=128m

# Limites CPU (format: 0.5, 1.0, 2.0)
POSTGRES_CPU_LIMIT=1.0
KEYCLOAK_CPU_LIMIT=1.0
BACKEND_CPU_LIMIT=0.5
FRONTEND_CPU_LIMIT=0.5
NGINX_CPU_LIMIT=0.5

# ---------------------------------------
# BACKUP CONFIGURATION
# ---------------------------------------
# Répertoire pour les backups
BACKUP_DIR=/home/master/backups/radio-staff
BACKUP_RETENTION_DAYS=30

# ---------------------------------------
# LOGGING CONFIGURATION
# ---------------------------------------
# Niveau de log (error, warn, info, debug)
LOG_LEVEL=info

# Taille max des logs Docker
LOG_MAX_SIZE=10m
LOG_MAX_FILE=3

# ---------------------------------------
# SECURITY CONFIGURATION
# ---------------------------------------
# Salt rounds pour bcrypt
BCRYPT_ROUNDS=12

# Session secret
# IMPORTANT: Générer avec: openssl rand -base64 32
SESSION_SECRET=CHANGE_ME_STRONG_SESSION_SECRET_MIN_32_CHARS

# ---------------------------------------
# MONITORING & HEALTH
# ---------------------------------------
# Activer le monitoring
ENABLE_MONITORING=true

# Health check intervals (en secondes)
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# ---------------------------------------
# KEYCLOAK OPTIMIZED SETTINGS
# ---------------------------------------
# Keycloak cache settings pour production
KC_CACHE=ispn
KC_CACHE_STACK=tcp

# Keycloak database pool
KC_DB_POOL_INITIAL_SIZE=5
KC_DB_POOL_MIN_SIZE=5
KC_DB_POOL_MAX_SIZE=20

# ---------------------------------------
# NOTES DE SÉCURITÉ
# ---------------------------------------
# 1. Générer TOUS les secrets avec: openssl rand -base64 32
# 2. Ne jamais utiliser les valeurs par défaut en production
# 3. Limiter l'accès au fichier .env.production: chmod 600 .env.production
# 4. Sauvegarder les secrets dans un gestionnaire de mots de passe
# 5. Changer les secrets régulièrement (tous les 90 jours recommandé)
# 6. Ne jamais commiter .env.production dans Git (.gitignore l'exclut)
